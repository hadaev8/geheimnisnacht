namespace = schaosfl

# Tzeentch doesn't like the sacrifice
character_event = {
	id = schaosfl.6001
	desc = EVTDESCAschaosfl6001
	picture = GFX_evt_tzeentch_sorcerer
	is_triggered_only = yes

	option = {
		name = EVTOPTAschaosfl6001
		change_variable = {
			which = "tzeentch_favor"
			value = -1
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1
				days = 8 random = 12
			}
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
				days = 2
				random = 4
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Tzeentch likes the sacrifice
character_event = {
	id = schaosfl.6002
	desc = EVTDESCAschaosfl6002
	picture = GFX_evt_tzeentch_sorcerer
	is_triggered_only = yes

	option = {
		name = EVTOPTAschaosfl6002
		piety = 400
		prestige = 400
		change_variable = {
			which = "tzeentch_favor"
			value = 10
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1 days = 8 random = 12
			}
		}
		if = {
			limit = {
				NOT = {
					any_friend = {
						is_demon_trigger = yes
					}
				}
			}
			create_random_soldier = {
				random_traits = no
				dynasty = RANDOM
				culture = flamer_tzeentch
				religion = tzeentch
				age = 999
				attributes = {
					martial = 15
					diplomacy = 4
					stewardship = 5
					intrigue = 30
					learning = 3
				}
				health = 6
				fertility = 0.7
				trait = brilliant_strategist
				trait = wroth
				trait = genius
				trait = mystic
				trait = cruel
				trait = zealous
				trait = tzeentch_demon
				trait = tzeentch_flamer
			}
			new_character = {
				set_character_flag = host_demon_commander
				add_friend = ROOT	# familiar mechanics
				location = {
					ROOT = {
						spawn_unit = {
							cannot_inherit = yes
							province = PREV
							troops = {
								daemonic_host = {
									3000 3000
								}
							}
						}
					}
				}
			}
			break = yes
		}
		location = {
			ROOT = {
				spawn_unit = {
					cannot_inherit = yes
					province = PREV
					troops = {
						daemonic_host = {
							3000 3000
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# On_death A Chosen/Prince dies
character_event = {
	id = schaosfl.7
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			wh_is_chaos_chosen_trigger = yes
			is_demon_prince_trigger = yes
		}
	}

	immediate = {
		if = {
			limit = {
				wh_is_chaos_chosen_trigger = yes
			}
 		 	1 = {
				change_variable = {
					which = "doom_counter"
					value = -3
				}
			}
		}
		if = {
			limit = {
				is_demon_prince_trigger = yes
			}
 		 	1 = {
				change_variable = {
					which = "doom_counter"
					value = -10
				}
			}
		}
	}
}

# Nurglite decides what gift to grant
character_event = {
	id = schaosfl.8
	desc = EVTDESCAschaosfl8
	picture = GFX_evt_nurgle_sorcerer
	is_triggered_only = yes

	option = {
		name = EVTOPTAschaosfl8
		trigger = {
			trait = prince_nurgle
		}
		piety = 25
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = schaosfl.8001
					days = 2
					random = 4
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = EVTOPTBschaosfl8
		trigger = {
			OR = {
				trait = chosen_nurgle
				trait = prince_nurgle
			}
		}
		piety = 25
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = schaosfl.8002
					days = 2
					random = 4
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = EVTOPTCschaosfl8
		trigger = {
			OR = {
				trait = champion_nurgle
				trait = chosen_nurgle
				trait = prince_nurgle
				trait = lore_nurgle
			}
		}
		piety = 25
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = schaosfl.8003
					days = 2
					random = 4
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = EVTOPTDschaosfl8
		trigger = {
			OR = {
				trait = champion_nurgle
				trait = chosen_nurgle
				trait = prince_nurgle
				trait = has_nurgles_rot
				trait = lore_nurgle
			}
		}
		piety = 25
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = schaosfl.8004
					days = 2
					random = 4
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# The recipient receives the new gift
character_event = {
	id = schaosfl.8001
	desc = EVTDESCAschaosfl8001
	picture = GFX_evt_nurgle_sorcerer
	is_triggered_only = yes

	option = {
		name = EVTOPTAschaosfl8001
		add_trait = leper
		ai_chance = {
			factor = 1
		}
	}
}

# The recipient receives the new gift
character_event = {
	id = schaosfl.8002
	desc = EVTDESCAschaosfl8002
	picture = GFX_evt_nurgle_sorcerer
	is_triggered_only = yes

	option = {
		name = EVTOPTAschaosfl8002
		add_trait = pneumonic
		ai_chance = {
			factor = 1
		}
	}
}

# The recipient receives the new gift
character_event = {
	id = schaosfl.8003
	desc = EVTDESCAschaosfl8003
	picture = GFX_evt_nurgle_sorcerer
	is_triggered_only = yes

	option = {
		name = EVTOPTAschaosfl8003
		add_trait = has_cancer
		ai_chance = {
			factor = 1
		}
	}
}

# The recipient receives the new gift
character_event = {
	id = schaosfl.8004
	desc = EVTDESCAschaosfl8004
	picture = GFX_evt_nurgle_sorcerer
	is_triggered_only = yes

	option = {
		name = EVTOPTAschaosfl8004
		add_trait = has_nurgles_rot
		ai_chance = {
			factor = 1
		}
	}
}
