namespace = ruin_lore


long_character_event = {
	id = ruin_lore.1#"High Magic"
	desc = ruin_lore.1_desc#"High Magic, the true magic. "
	is_triggered_only = yes

	picture = GFX_evt_skaven_caster
	immediate = {
		event_target:magic_caster = {
			magic_xp_counter = yes
			magic_points_setup = yes
			magic_spells_known = yes
		}
	}
	option = {
	trigger = {event_target:magic_caster = {check_variable = { which = "spell_power" value = 1}} }
		name = ruin_lore.1a
		long_character_event = {id = ruin_lore.2}
	}
	option = {
	trigger = {event_target:magic_caster = {check_variable = { which = "spell_power" value = 1}} }
		name = ruin_lore.1b
		event_target:magic_caster = {
			clr_character_flag = casting
		}
	}
	option = {
	trigger = {event_target:magic_caster = { not = { check_variable = { which = "spell_power" value = 0}} }}
		name = ruin_lore.1c
		event_target:magic_caster = {
			clr_character_flag = casting
		}
	}
	option = {
		trigger = {
			event_target:magic_caster = {
				check_variable = { which = "spell_power" value = 4}
				check_variable = { which = "spellknownlvl" value = 6 }
				trait = grey_seer
			}
		}
		name = ruin_lore.1d#"High Magic; Fiery Convocation"
		long_character_event = {id = ruin_lore.11}
	}

}


long_character_event = {
	id = ruin_lore.11#"High Magic"
	desc = ruin_lore.11_desc#"High Magic, the true magic. "
	is_triggered_only = yes

	picture = GFX_evt_skaven_caster
	option = {
		name = ruin_lore.11a#"High Magic; Fiery Convocation"
		character_event = {id = ruin_lore.450}
	}
	option = {
		name = ruin_lore.11b#"High Magic; Fiery Convocation"
		long_character_event = {id = ruin_lore.2}
	}
}

long_character_event = {
	id = ruin_lore.2#"High Magic"
	desc = ruin_lore.2_desc#"High Magic, the true magic. "
	is_triggered_only = yes

	picture = GFX_evt_skaven_caster

	immediate = {
		magic_spells_known = yes
	}

	option = {
		trigger = {
			event_target:magic_caster = {
				check_variable = { which = "spell_power" value = 1}
				check_variable = { which = "spellknownlvl" value = 1}
				not = {
					trait = plaguelord
				}
			}
		}
		name = ruin_lore.2a#"High Magic; Drain Magic"
		character_event = {id = ruin_lore.100}
	}
	option = {
		trigger = {
			event_target:magic_caster = {
				check_variable = { which = "spell_power" value = 2}
				check_variable = { which = "spellknownlvl" value = 3}
				not = {
					trait = plaguelord
				}
			}
		}
		name = ruin_lore.2b#"High Magic; Soul Quench"
		character_event = {id = ruin_lore.200}
	}
	option = {
		trigger = {
			event_target:magic_caster = {
				check_variable = { which = "spell_power" value = 1}
				check_variable = { which = "spellknownlvl" value = 1}
				not = {
					trait = warlock_engineer
				}
			}
		}
		name = ruin_lore.2c#"High Magic; Apotheosis"
		character_event = {id = ruin_lore.300}
	}
	option = {
		trigger = {
			event_target:magic_caster = {
				check_variable = { which = "spell_power" value = 3}
				check_variable = { which = "spellknownlvl" value = 2}
				not = {
					trait = warlock_engineer
				}
			}
		}
		name = ruin_lore.2d#"High Magic; Apotheosis"
		character_event = {id = ruin_lore.400}
	}
}




#Drain Magic


character_event = {
	id = ruin_lore.100#"High Magic; Soul Quench"
	desc = ruin_lore.100_desc#"You channel the arcane powers and lash out towards the enemy."
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster
	immediate = {
		dispel_setup_effect = yes
		event_target:magic_caster = {
			change_variable = {which = "spell_power" value = -1}
			miscast_test_6 = yes
		}
	}
	option = {
		name = ruin_lore.100a#
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = has_dispel
				}
			}
			dispel_saving_roll_50 = yes
		}

		if = {
			limit = {
				event_target:magic_caster = {
					NOR = {
						has_character_flag = miscast
						has_character_flag = dispeled
					}
				}
			}
			character_event = { id = ruin_lore.101}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = dispeled
				}
			}
			event_target:magic_caster = { clr_character_flag = dispeled}
			character_event = { id = ruin_lore.501}
		}
		if = {
			limit = {
				event_target:magic_caster = { has_character_flag = miscast }
			}
			character_event = {id = magic_system.99991}#If has the miscast flag, skip to the miscast event table
		}

	}
}


character_event = {
	id = ruin_lore.101#Drain Magic Power 1"
	desc = ruin_lore.101_desc#"Your spell burns through the air, taking from all enemies the ability to cast. "
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster


	option = {
		name = ruin_lore.101a#No
		character_event = { id = ruin_lore.500 }
		if = {
			limit = {
				event_target:magic_caster = {
					check_variable = { which = "warpcrack" value = 1 }
				}
			}
			any_character = {
				limit = {
					war_with = root
					any_army = {
						location = { province = event_target:spellloc }
					}
				}
				random_army = {
					limit = {
						location = { province = event_target:spellloc }
					}
					troops = -0.08
					morale = -0.08
				}
			}
			if = {
				limit = {
					event_target:magic_caster = {
						at_location = event_target:spellloc
					}
				}
				siege = {
					enemy = {
						troops = -0.08
						morale = -0.08
					}
				}
			}
			random = {
				chance = 15
				modifier = {
					factor = 2
					event_target:magic_caster = {
						trait = grey_seer
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 2 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 3 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 4 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 5 }
					}
				}
				if = {
					limit = {
						event_target:magic_caster = {
							check_variable = { which = "warpcrack" value = 2 }
						}
					}
					event_target:magic_caster = {
						magic_item_proc = yes
					}
				}
				character_event = { id = ruin_lore.102 }
			}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					not = { check_variable = { which = "warpcrack" value = 1 } }
				}
			}
			any_character = {
				limit = {
					war_with = root
					any_army = {
						location = { province = event_target:spellloc }
					}
				}
				random_army = {
					limit = {
						location = { province = event_target:spellloc }
					}
					troops = -0.05
					morale = -0.05
				}
			}
			if = {
				limit = {
					event_target:magic_caster = {
						at_location = event_target:spellloc
					}
				}
				siege = {
					enemy = {
						troops = -0.05
						morale = -0.05
					}
				}
			}
			random = {
				chance = 15
				modifier = {
					factor = 2
					event_target:magic_caster = {
						trait = grey_seer
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 2 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 3 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 4 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 5 }
					}
				}
				if = {
					limit = {
						event_target:magic_caster = {
							check_variable = { which = "warpcrack" value = 2 }
						}
					}
					event_target:magic_caster = {
						magic_item_proc = yes
					}
				}
				character_event = { id = ruin_lore.102 }
			}
		}
	}
}

character_event = {
	id = ruin_lore.102#Drain Magic Power 1"
	is_triggered_only = yes
	hide_window = yes

	option = {
		name = ruin_lore.101a#No
		if = {
			limit = {
				event_target:magic_caster = {
					check_variable = { which = "warpcrack" value = 1 }
				}
			}
			any_character = {
				limit = {
					war_with = root
					any_army = {
						location = { province = event_target:spellloc }
					}
				}
				random_army = {
					limit = {
						location = { province = event_target:spellloc }
					}
					troops = -0.08
					morale = -0.08
				}
			}
			if = {
				limit = {
					event_target:magic_caster = {
						at_location = event_target:spellloc
					}
				}
				siege = {
					enemy = {
						troops = -0.08
						morale = -0.08
					}
				}
			}

			random = {
				chance = 15
				modifier = {
					factor = 2
					event_target:magic_caster = {
						trait = grey_seer
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 2 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 3 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 4 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 5 }
					}
				}
				if = {
					limit = {
						event_target:magic_caster = {
							check_variable = { which = "warpcrack" value = 2 }
						}
					}
					event_target:magic_caster = {
						magic_item_proc = yes
					}
				}
				repeat_event = { id = ruin_lore.102 }
			}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					not = { check_variable = { which = "warpcrack" value = 1 } }
				}
			}
			any_character = {
				limit = {
					war_with = root
					any_army = {
						location = { province = event_target:spellloc }
					}
				}
				random_army = {
					limit = {
						location = { province = event_target:spellloc }
					}
					troops = -0.05
					morale = -0.05
				}
			}
			if = {
				limit = {
					event_target:magic_caster = {
						at_location = event_target:spellloc
					}
				}
				siege = {
					enemy = {
						troops = -0.05
						morale = -0.05
					}
				}
			}

			random = {
				chance = 15
				modifier = {
					factor = 2
					event_target:magic_caster = {
						trait = grey_seer
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 2 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 3 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 4 }
					}
				}
				modifier = {
					factor = 1.1
					event_target:magic_caster = {
						check_variable = { which = "warpcrack" value = 5 }
					}
				}
				if = {
					limit = {
						event_target:magic_caster = {
							check_variable = { which = "warpcrack" value = 2 }
						}
					}
					event_target:magic_caster = {
						magic_item_proc = yes
					}
				}
				repeat_event = { id = ruin_lore.102 }
			}
		}
	}
}



character_event = {
	id = ruin_lore.200#"High Magic; Soul Quench"
	desc = ruin_lore.200_desc#"You channel the arcane powers and lash out towards the enemy."
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster
	immediate = {
		dispel_setup_effect = yes
		event_target:magic_caster = {
			change_variable = {which = "spell_power" value = -2}
			miscast_test_7 = yes
		}
	}
	option = {
		name = ruin_lore.200a#
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = has_dispel
				}
			}
			dispel_saving_roll_60 = yes
			event_target:magic_caster = {
				clr_character_flag = has_dispel
			}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					NOR = {
						has_character_flag = miscast
						has_character_flag = dispeled
					}
				}
			}
			character_event = { id = ruin_lore.201}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = dispeled
				}
			}
			event_target:magic_caster = { clr_character_flag = dispeled}
			character_event = { id = ruin_lore.501}
		}
		if = {
			limit = {
				event_target:magic_caster = { has_character_flag = miscast }
			}
			character_event = {id = magic_system.99991}#If has the miscast flag, skip to the miscast event table
		}

	}
}

character_event = {
	id = ruin_lore.201#Soul Quench 1"
	desc = ruin_lore.201#"Your power consumes the life of your chosen target "
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster


	option = {
		name = ruin_lore.201a#No
		character_event = { id = ruin_lore.500 }
		if = {
			limit = {
				event_target:magic_caster = {
					not = { check_variable = { which = "warpcrack" value = 1 } }
				}
			}
			any_character = {
				limit = {
					war_with = root
					any_army = {
						location = { province = event_target:spellloc }
					}
				}
				random_army = {
					limit = {
						location = { province = event_target:spellloc }
					}
					troops = -0.1
					morale = -0.1
				}
			}
			if = {
				limit = {
					event_target:magic_caster = {
						at_location = event_target:spellloc
					}
				}
				siege = {
					enemy = {
						troops = -0.1
						morale = -0.1
					}
				}
			}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					check_variable = { which = "warpcrack" value = 1 }
				}
			}
			any_character = {
				limit = {
					war_with = root
					any_army = {
						location = { province = event_target:spellloc }
					}
				}
				random_army = {
					limit = {
						location = { province = event_target:spellloc }
					}
					troops = -0.14
					morale = -0.14
				}
			}
			if = {
				limit = {
					event_target:magic_caster = {
						at_location = event_target:spellloc
					}
				}
				siege = {
					enemy = {
						troops = -0.14
						morale = -0.14
					}
				}
			}
		}
	}
}


character_event = {
	id = ruin_lore.300#"High Magic; Apotheosis"
	desc = ruin_lore.300_desc#"You channel the arcane powers and let it flow to your dead and dying"
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster

	immediate = {
		dispel_setup_effect = yes
		event_target:magic_caster = {
			change_variable = { which = "spell_power" value = -1}
			miscast_test_5 = yes
		}
	}
	option = {
		name = ruin_lore.300a#
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = has_dispel
				}
			}
			dispel_saving_roll_60 = yes
			event_target:magic_caster = {
				clr_character_flag = has_dispel
			}
		}

		if = {
			limit = {
				event_target:magic_caster = {
					NOR = {
						has_character_flag = miscast
						has_character_flag = dispeled
					}
				}
			}
			character_event = { id = ruin_lore.301}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = dispeled
				}
			}
			event_target:magic_caster = { clr_character_flag = dispeled}
			character_event = { id = ruin_lore.501}
		}
		if = {
			limit = {
				event_target:magic_caster = { has_character_flag = miscast }
			}
			character_event = {id = magic_system.99991}#If has the miscast flag, skip to the miscast event table
		}
	}
}

character_event = {
	id = ruin_lore.301#Apotheosis 1"
	desc = ruin_lore.301_desc#"Your spell restores those close to death or those freshly dead"
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster

	option = {
		name = ruin_lore.301a#Cast Another Spell ?
		character_event = { id = ruin_lore.500}
		if = {
			limit = {
				event_target:magic_caster = {
					not = { check_variable = { which = "warpcrack" value = 1 } }
				}
			}
			any_character = {
				limit = {
					war_with = root
					any_army = {
						location = { province = event_target:spellloc }
					}
				}
				random_army = {
					limit = {
						location = { province = event_target:spellloc }
					}
					troops = -0.05
					morale = -0.05
					leader = {
						add_trait = has_typhus
					}
				}
			}
			if = {
				limit = {
					event_target:magic_caster = {
						at_location = event_target:spellloc
					}
				}
				siege = {
					enemy = {
						troops = -0.05
						morale = -0.05
						add_trait = has_typhus
					}
				}
			}
			event_target:spellloc = {
				any_province_character = {
					random = {
						chance = 5
						add_trait = has_typhus
					}
				}
			}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					check_variable = { which = "warpcrack" value = 1 }
				}
			}
			any_character = {
				limit = {
					war_with = root
					any_army = {
						location = { province = event_target:spellloc }
					}
				}
				random_army = {
					limit = {
						location = { province = event_target:spellloc }
					}
					troops = -0.08
					morale = -0.08
					leader = {
						add_trait = has_typhus
					}
				}
			}
			if = {
				limit = {
					event_target:magic_caster = {
						at_location = event_target:spellloc
					}
				}
				siege = {
					enemy = {
						troops = -0.08
						morale = -0.08
						add_trait = has_typhus
					}
				}
			}
			event_target:spellloc = {
				any_province_character = {
					random = {
						chance = 10
						add_trait = has_typhus
					}
				}
			}
		}
	}
}


character_event = {
	id = ruin_lore.400#"High Magic; Soul Quench"
	desc = ruin_lore.400_desc#"You channel the arcane powers and lash out towards the enemy."
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster
	immediate = {
		dispel_setup_effect = yes
		event_target:magic_caster = {
			change_variable = { which = "spell_power" value = -3 }
			miscast_test_7 = yes
		}
	}
	option = {
		name = ruin_lore.400a#
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = has_dispel
				}
			}
			dispel_saving_roll_60 = yes
			event_target:magic_caster = {
				clr_character_flag = has_dispel
			}
		}

		if = {
			limit = {
				event_target:magic_caster = {
					NOR = {
						has_character_flag = miscast
						has_character_flag = dispeled
					}
				}
			}
			character_event = { id = ruin_lore.401}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = dispeled
				}
			}
			event_target:magic_caster = { clr_character_flag = dispeled}
			character_event = { id = ruin_lore.501}
		}
		if = {
			limit = {
				event_target:magic_caster = { has_character_flag = miscast }
			}
			character_event = {id = magic_system.99991}#If has the miscast flag, skip to the miscast event table
		}
	}
}

character_event = {
	id = ruin_lore.401#Soul Quench 1"
	desc = ruin_lore.401_desc#"Your power consumes the life of your chosen target "
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster
	immediate = {
	}

	option = {
		name = ruin_lore.401a#Cast Another Spell ?
		root = {character_event = {id = ruin_lore.500}}
		if = {
			limit = {
				event_target:magic_caster = {
					not = { check_variable = { which = "warpcrack" value = 1 } }
				}
			}
			event_target:magic_caster = {
				spawn_unit = {
				  owner = ROOT
				  province = ROOT
				  home = ROOT
				  troops = {
					war_elephants = { 30 30 }
				  }
				  attrition = 0.0
				  reinforces = yes
				  disband_on_peace = no
				  maintenance_multiplier = 0.0
				}
			}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					check_variable = { which = "warpcrack" value = 1 }
				}
			}
			event_target:magic_caster = {
				spawn_unit = {
				  owner = ROOT
				  province = ROOT
				  home = ROOT
				  troops = {
					war_elephants = { 50 50 }
				  }
				  attrition = 0.0
				  reinforces = yes
				  disband_on_peace = no
				  maintenance_multiplier = 0.0
				}
			}
		}
	}
}

character_event = {
	id = ruin_lore.450#"High Magic; Soul Quench"
	desc = ruin_lore.450_desc#"You channel the arcane powers and lash out towards the enemy."
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster
	immediate = {
		dispel_setup_effect = yes
		event_target:magic_caster = {
			change_variable = {which = "spell_power" value = -4}
			miscast_test_12 = yes
			set_character_flag = thirteen
		}
	}
	option = {
		name = ruin_lore.450a#
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = has_dispel
				}
			}
			dispel_saving_roll_30 = yes
			event_target:magic_caster = {
				clr_character_flag = has_dispel
			}
		}

		if = {
			limit = {
				event_target:magic_caster = {
					NOR = {
						has_character_flag = miscast
						has_character_flag = dispeled
					}
				}
			}
			character_event = { id = ruin_lore.451}
		}
		if = {
			limit = {
				event_target:magic_caster = {
					has_character_flag = dispeled
				}
			}
			event_target:magic_caster = { clr_character_flag = dispeled}
			character_event = { id = ruin_lore.501}
		}
		if = {
			limit = {
				event_target:magic_caster = { has_character_flag = miscast }
			}
			character_event = {id = magic_system.99991}#If has the miscast flag, skip to the miscast event table
		}
	}
}

character_event = {
	id = ruin_lore.451#Soul Quench 1"
	desc = ruin_lore.451#"Your power consumes the life of your chosen target "
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster
	immediate = {
	}

	option = {
		name = ruin_lore.451a#Cast Another Spell ?
		root = {character_event = {id = ruin_lore.500}}
		event_target:magic_caster = {
			spawn_unit = {
			  owner = ROOT
			  province = ROOT
			  home = ROOT
			  troops = {
				heavy_infantry = { 300 300 }
			  }
			  attrition = 0.0
			  reinforces = yes
			  disband_on_peace = no
			  maintenance_multiplier = 0.0
			}
		}
		any_character = {
			limit = {
				war_with = root
				any_army = {
					location = { province = event_target:spellloc }
				}
			}
			random_army = {
				limit = {
					location = { province = event_target:spellloc }
				}
				troops = -0.3
				morale = -0.3
			}
		}
	}

}



#process





character_event = {
	id = ruin_lore.500#"High Magic; Soul Quench"
	desc = ruin_lore.500_desc#"You channel the arcane powers and lash out towards the enemy."
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster
	immediate = {
		event_target:magic_caster = {
			magic_item_proc = yes
		}
	}
	option = {
		name = ruin_lore.500a
		character_event = { id = ruin_lore.503}
	}
}

character_event = {
	id = ruin_lore.501#"High Magic; Soul Quench"
	desc = ruin_lore.501_desc#"You channel the arcane powers and lash out towards the enemy."
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster
	immediate = {
		event_target:magic_caster = {
			clr_character_flag = dispeled
			magic_item_proc = yes
		}

	}
	option = {
		name = ruin_lore.501a
		character_event = { id = ruin_lore.503}
	}

}



character_event = {
	id = ruin_lore.503#"High Magic; Soul Quench"
	desc = ruin_lore.503
	is_triggered_only = yes
	picture = GFX_evt_skaven_caster
	option = {
		name = ruin_lore.503a
		trigger = {
			event_target:magic_caster = {
				or = {
					and = {
						check_variable = { which = "spell_power" value = 1 }
						trait = grey_seer
						not = { has_character_flag = thirteen }
					}
					and = {
						check_variable = { which = "warpcrack" value = 1 }
						check_variable = { which = "spell_power" value = 1 }
						trait = warlock_engineer
					}
					and = {
						trait = plaguelord
						check_variable = { which = "spell_power" value = 1 }
					}
				}

			}
		}
		repeat_event = { id = ruin_lore.2 }
	}
	option = {
		name = ruin_lore.503b
		event_target:magic_caster = {
			character_event = { id = magic_system.99997 }
			clr_character_flag = thirteen
		}
	}
}


character_event = {
	id = ruin_lore.900#"High Magic; Soul Quench"
	is_triggered_only = yes
	picture = GFX_evt_mage_lore_heavens
	hide_window = yes
	ai = yes
	trigger = {
		or = {
			trait = grey_seer
			trait = plaguelord
			trait = warlock_engineer
		}
		NOT = {
			has_character_modifier = magic_cooldown
		}
	}
	immediate = {
		save_event_target_as = magic_caster
		event_target:magic_caster = {
			location = {
				save_event_target_as = spellloc
			}

		}
		character_event = { id = ruin_lore.1 }
	}

}
